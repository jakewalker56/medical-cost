<div class="row">
  <div class="columns small-12">
    <h3>How much health care will I use this year?</h3>
  </div>
</div>

<div class="row">
  <div class="columns medium-4">
    <label>Gender</label>

    <label><input class="ms-input" type="radio" name="SEX" value="male" checked> Male</label>
    <label><input class="ms-input" type="radio" name="SEX" value="female"> Female</label>

    <label for="AGE">Age</label>
    <input type="range" name="AGE" class="ms-input ion" data-min="1" data-max="80" data-max-postfix="+" value="30" data-step="1" data-grid="true" data-grid-num="1" data-prefix="Age ">

    <label for="HEIGHT">Height</label> 
    <div style='width:48%; display:inline-block;'>
    <input type="range" name="HEIGHTFT" class="ms-input ion" data-min="1" data-max="7" max="7" data-max-postfix="+" value="5" data-step="1" data-grid="true" data-grid-num="1" data-postfix=" feet">
    </div>
    <div style='width:48%; display:inline-block; float:right'>
    <input type="range" name="HEIGHTIN" class="ms-input ion" data-min="0" data-max="11" max="11" data-max-postfix="+" value="6" data-step="1" data-grid="true" data-grid-num="1" data-postfix=" inches">
    </div>

    <label for="WEIGHT">Weight</label>
    <input type="range" name="WEIGHT" class="ms-input ion" data-min="10" data-max="300" max="300" data-max-postfix="+" value="175" data-step="1" data-grid="true" data-grid-num="1" data-postfix=" lbs.">

    <label>Race</label>
    <select class="ms-input" name="RACE">
      <option value="1">White</option>
      <option value="2">Black</option>
      <option value="3">American Indian / Alaskan</option>
      <option value="4">Asian / Pacific Islander</option>
      <option value="6">Multiracial / Other</option>
    </select>

    <label>
      <input class="ms-input" type="checkbox" id="BORNUSA" name="BORNUSA" value="BORNUSA" checked>
      Born in the US
    </label>


    <label>Marital Status</label>
    <select class="ms-input" name="MARRY">
      <option value="5">Never Married</option>
      <option value="1">Married</option>
      <option value="3">Divorced</option>
      <option value="4">Separated</option>
      <option value="2">Widowed</option>
      <option value="6">Under 16/Inapplicable</option>
    </select>
  


    <label>Education level</label>
    <select class="ms-input" name="EDU">
      <option value="-1">Inapplicable or under 5</option>
      <option value="1">Less than 8th grade</option>
      <option value="2">9th-12th grade, no HS diploma</option>
      <option value="13">GED or HS grad</option>
      <option value="14">Some College or Associates Degree</option>
      <option value="15" selected>Bachelor's Degree</option>
      <option value="16">Masters, Doctorate, or Professional Degree</option>
    </select>

    <label>Hours worked per week</label>
    <input type="range" name="HOUR" class="ms-input ion" data-min="0" data-max="80" value="40" data-step="1" data-grid="true" data-grid-num="1" data-postfix=" hours">


    <label>Annual Salary</label>
    <input type="range" name="SALARY" class="ms-input ion" data-min="0" data-max="300000" max="300000"  value=50000 data-step="1000" data-grid="true" data-grid-num="1" data-prefix="$" data-prettify-separator=",">

    <label for="conditions">Do any of these conditions apply to you?</label>
    <label>
      <input class="ms-input" type="checkbox" name="conditions" value="CANCER" unchecked> Cancer
    </label>
    <label>
      <input class="ms-input" type="checkbox" name="conditions" value="DIAB" unchecked> Diabetes
    </label>
    <label>
      <input class="ms-input" type="checkbox" name="conditions" value="PREG" unchecked> Pregnant
    </label>
  </div>
  <div class="columns medium-8">

    <h6>We ran a simulation of <span id="iterations"></span> people like you based on historical data.  People like you use an <strong>average of <span id="mean"></span></strong> of health care per year, but the typical (median) person like you <strong>only uses <span id="median"></span></strong>.  The reason for this difference is that the top 2 percent use more than <strong><span id="toptwopercent"></span></strong>.  These outliers drive the average up without affecting the experience of the typical person. However, <strong><span id="zeropercent"></span> percent</strong> of people like you don't go to the doctor at all in a given year.</h6>

    <div id="info">&nbsp;</div>
    <div id="histogram"></div>

    <h6>How much you end up paying out-of-pocket depends both on your insurance plan structure (deductible, copays, etc.) as well as the discounts your insurer has negotiated with providers. The <a href="https://meps.ahrq.gov/mepsweb/">dataset</a> underlying records the <strong>sum of all payments made</strong> rather than the <strong>total amount billed</strong> because discounting is so prevalant that those numbers are often very different. It's likely that the bill you see is higher than the amount that actually gets paid for your care.</h6>

  </div>

</div>

<script>
  REG = [{"coefficient":5.7564431,"_row":"intercept"},{"coefficient":0.3685648,"_row":"BORNUSATRUE"},{"coefficient":0.02914355,"_row":"AGE"},{"coefficient":-0.02420593,"_row":"BMI3"},{"coefficient":-0.02479139,"_row":"BMI4"},{"coefficient":0.27505403,"_row":"BMI5"},{"coefficient":-0.01243368,"_row":"SEXTRUE"},{"coefficient":-0.17362418,"_row":"RACE2"},{"coefficient":-0.07864105,"_row":"RACE3"},{"coefficient":-0.02505431,"_row":"RACE4"},{"coefficient":0.12789383,"_row":"MARRY3"},{"coefficient":0.06351783,"_row":"MARRY4"},{"coefficient":0.03093497,"_row":"MARRY5"},{"coefficient":-0.0643487,"_row":"MARRY6"},{"coefficient":0.80680253,"_row":"CANCERTRUE"},{"coefficient":1.20164073,"_row":"DIABTRUE"},{"coefficient":0.02736566,"_row":"EDU1"},{"coefficient":0.07160819,"_row":"EDU2"},{"coefficient":0.05574399,"_row":"EDU14"},{"coefficient":0.11931377,"_row":"EDU15"},{"coefficient":0.28004125,"_row":"EDU16"},{"coefficient":-0.00563638,"_row":"HOUR"},{"coefficient":1.39009991,"_row":"PREGTRUE"},{"coefficient":-0.27198332,"_row":"EMPTRUE"},{"coefficient":0.00042762,"_row":"SALARY"},{"coefficient":0.30563891,"_row":"LT5TRUE"},{"coefficient":-0.05767336,"_row":"MT21TRUE"},{"coefficient":0.00500128,"_row":"EMPTRUE:SALARY"},{"coefficient":0.00849551,"_row":"RACE2:SALARY"},{"coefficient":-0.32642268,"_row":"RACE2:EMPTRUE"},{"coefficient":0.07297069,"_row":"RACE3:EMPTRUE"},{"coefficient":-0.23937396,"_row":"RACE4:EMPTRUE"},{"coefficient":-0.00039614,"_row":"RACE2:HOUR"},{"coefficient":0.00103532,"_row":"RACE4:HOUR"},{"coefficient":-0.0008936,"_row":"RACE6:HOUR"},{"coefficient":0.01170398,"_row":"DIABTRUE:MT21TRUE"},{"coefficient":-0.00573396,"_row":"AGE:DIABTRUE"},{"coefficient":0.3997071,"_row":"CANCERTRUE:MT21TRUE"},{"coefficient":-0.01023818,"_row":"AGE:CANCERTRUE"},{"coefficient":0.00227908,"_row":"AGE:BMI5"},{"coefficient":-0.06379334,"_row":"AGE:LT5TRUE"},{"coefficient":-0.01001129,"_row":"AGE:LT10TRUE"},{"coefficient":0.09576515,"_row":"SEXTRUE:LT5TRUE"},{"coefficient":-0.05184508,"_row":"BMI2:MT21TRUE"},{"coefficient":-0.06443614,"_row":"BMI3:MT21TRUE"},{"coefficient":-0.10339363,"_row":"BMI2:SEXTRUE"},{"coefficient":-0.21393136,"_row":"BMI4:SEXTRUE"},{"coefficient":-0.22858777,"_row":"EDU1:MT21TRUE"},{"coefficient":-0.21816931,"_row":"EDU2:MT21TRUE"},{"coefficient":0.1599609,"_row":"EDU14:MT21TRUE"},{"coefficient":0.1695454,"_row":"EDU15:MT21TRUE"},{"coefficient":0.22794839,"_row":"EDU16:MT21TRUE"},{"coefficient":0.06893785,"_row":"RACE2:EDU1"},{"coefficient":0.16257579,"_row":"RACE3:EDU1"},{"coefficient":-0.10276775,"_row":"RACE4:EDU1"},{"coefficient":0.14289977,"_row":"RACE6:EDU1"},{"coefficient":0.12289575,"_row":"RACE2:EDU2"},{"coefficient":-0.10111563,"_row":"RACE3:EDU2"},{"coefficient":-0.10126594,"_row":"RACE6:EDU2"},{"coefficient":0.10649429,"_row":"RACE2:EDU13"},{"coefficient":-0.03492916,"_row":"RACE4:EDU13"},{"coefficient":0.54590434,"_row":"RACE6:EDU13"},{"coefficient":-0.0743676,"_row":"RACE2:EDU14"},{"coefficient":0.61434078,"_row":"RACE3:EDU14"},{"coefficient":0.08355333,"_row":"RACE4:EDU14"},{"coefficient":0.02029135,"_row":"RACE2:EDU15"},{"coefficient":0.33935394,"_row":"RACE3:EDU15"},{"coefficient":-0.06354484,"_row":"RACE4:EDU15"},{"coefficient":1.59308743,"_row":"RACE3:EDU16"},{"coefficient":-0.01697046,"_row":"RACE4:EDU16"},{"coefficient":0.0378263,"_row":"RACE2:MT21TRUE"},{"coefficient":0.2884197,"_row":"RACE3:MT21TRUE"},{"coefficient":-0.0949288,"_row":"RACE4:MT21TRUE"},{"coefficient":0.07580988,"_row":"RACE6:MT21TRUE"},{"coefficient":0.01409661,"_row":"RACE2:EMPTRUE:SALARY"},{"coefficient":0.00005558,"_row":"RACE2:HOUR:SALARY"},{"coefficient":-0.00081761,"_row":"RACE3:HOUR:SALARY"},{"coefficient":0.00047296,"_row":"RACE4:HOUR:SALARY"},{"coefficient":-0.00150184,"_row":"RACE2:HOUR:EMPTRUE"},{"coefficient":0.0000296,"_row":"RACE4:HOUR:EMPTRUE"},{"coefficient":-0.00382227,"_row":"RACE6:HOUR:EMPTRUE"},{"coefficient":-0.00009515,"_row":"AGE:DIABTRUE:MT21TRUE"},{"coefficient":-0.00254221,"_row":"AGE:CANCERTRUE:DIABTRUE"},{"coefficient":0.00379019,"_row":"AGE:BMI2:PREGTRUE"},{"coefficient":-0.0000358,"_row":"AGE:BMI3:PREGTRUE"},{"coefficient":-0.00009064,"_row":"AGE:BMI4:PREGTRUE"},{"coefficient":-0.00366086,"_row":"AGE:BMI5:PREGTRUE"},{"coefficient":-0.01286917,"_row":"AGE:SEXTRUE:LT5TRUE"},{"coefficient":0.01114242,"_row":"AGE:SEXTRUE:LT10TRUE"},{"coefficient":0.00023375,"_row":"AGE:SEXTRUE:MT21TRUE"},{"coefficient":-0.01671867,"_row":"AGE:BMI3:LT5TRUE"},{"coefficient":-0.00713331,"_row":"AGE:BMI3:LT10TRUE"},{"coefficient":-0.00151626,"_row":"AGE:BMI2:MT21TRUE"},{"coefficient":-0.00015632,"_row":"AGE:BMI3:MT21TRUE"},{"coefficient":0.00074931,"_row":"AGE:BMI4:MT21TRUE"},{"coefficient":0.03826791,"_row":"BMI3:SEXTRUE:LT5TRUE"},{"coefficient":-0.13611666,"_row":"BMI3:SEXTRUE:MT21TRUE"},{"coefficient":-0.01374247,"_row":"BMI5:SEXTRUE:MT21TRUE"},{"coefficient":0.16036095,"_row":"RACE2:EDU1:MT21TRUE"},{"coefficient":-0.99077417,"_row":"RACE3:EDU1:MT21TRUE"},{"coefficient":0.54866906,"_row":"RACE4:EDU1:MT21TRUE"},{"coefficient":0.22088282,"_row":"RACE6:EDU1:MT21TRUE"},{"coefficient":0.19904567,"_row":"RACE2:EDU2:MT21TRUE"},{"coefficient":-0.24164075,"_row":"RACE4:EDU2:MT21TRUE"},{"coefficient":0.24686415,"_row":"RACE6:EDU2:MT21TRUE"},{"coefficient":0.0817984,"_row":"RACE4:EDU13:MT21TRUE"},{"coefficient":-0.21000514,"_row":"RACE6:EDU13:MT21TRUE"},{"coefficient":0.08022425,"_row":"RACE2:EDU14:MT21TRUE"},{"coefficient":0.00603657,"_row":"RACE2:EDU15:MT21TRUE"},{"coefficient":-0.00193904,"_row":"RACE4:EDU15:MT21TRUE"},{"coefficient":0.0349774,"_row":"RACE6:EDU15:MT21TRUE"},{"coefficient":0.39443032,"_row":"RACE3:EDU16:MT21TRUE"},{"coefficient":0.00019858,"_row":"RACE6:EDU16:MT21TRUE"},{"coefficient":0.00010976,"_row":"RACE2:HOUR:EMPTRUE:SALARY"},{"coefficient":0.00001291,"_row":"RACE4:HOUR:EMPTRUE:SALARY"},{"coefficient":-4.33454211e-06,"_row":"AGE:CANCERTRUE:DIABTRUE:MT21TRUE"},{"coefficient":-0.03230705,"_row":"AGE:BMI3:SEXTRUE:LT5TRUE"},{"coefficient":0.00227848,"_row":"AGE:BMI3:SEXTRUE:LT10TRUE"},{"coefficient":0.00293181,"_row":"AGE:BMI4:SEXTRUE:MT21TRUE"},{"coefficient":-0.00335907,"_row":"AGE:BMI5:SEXTRUE:MT21TRUE"}];

  VARREG = [{"coefficient":0.8809777,"_row":"intercept"},{"coefficient":-0.02127117,"_row":"BORNUSATRUE"},{"coefficient":-0.00116594,"_row":"AGE"},{"coefficient":-0.01468093,"_row":"RACE4"},{"coefficient":0.01088916,"_row":"RACE6"},{"coefficient":-0.0068811,"_row":"MARRY1"},{"coefficient":-0.01635051,"_row":"MARRY2"},{"coefficient":0.05225723,"_row":"MARRY3"},{"coefficient":0.03498321,"_row":"MARRY4"},{"coefficient":0.04363289,"_row":"MARRY5"},{"coefficient":0.07261898,"_row":"CANCERTRUE"},{"coefficient":-0.00694875,"_row":"EDU1"},{"coefficient":0.02272442,"_row":"EDU2"},{"coefficient":0.00355679,"_row":"EDU13"},{"coefficient":-0.03825694,"_row":"EDU15"},{"coefficient":-0.0492632,"_row":"EDU16"},{"coefficient":-0.00022081,"_row":"HOUR"},{"coefficient":-0.05826203,"_row":"LT10TRUE"},{"coefficient":0.08957614,"_row":"MT21TRUE"},{"coefficient":-0.00081097,"_row":"EMPTRUE:SALARY"},{"coefficient":-0.00063382,"_row":"HOUR:EMPTRUE"},{"coefficient":-1.29499746e-06,"_row":"RACE2:SALARY"},{"coefficient":-0.00115807,"_row":"AGE:DIABTRUE"},{"coefficient":0.00692797,"_row":"CANCERTRUE:MT21TRUE"},{"coefficient":-0.0018034,"_row":"AGE:CANCERTRUE"},{"coefficient":-0.00010943,"_row":"AGE:BMI5"},{"coefficient":0.04258953,"_row":"BMI3:PREGTRUE"},{"coefficient":-0.07885188,"_row":"BMI5:PREGTRUE"},{"coefficient":-0.01876253,"_row":"AGE:LT5TRUE"},{"coefficient":-0.00733369,"_row":"AGE:LT10TRUE"},{"coefficient":0.0066208,"_row":"SEXTRUE:LT5TRUE"},{"coefficient":0.00224433,"_row":"SEXTRUE:MT21TRUE"},{"coefficient":-0.00508204,"_row":"BMI3:LT10TRUE"},{"coefficient":-0.00922336,"_row":"BMI2:MT21TRUE"},{"coefficient":0.01019234,"_row":"BMI3:MT21TRUE"},{"coefficient":0.01354819,"_row":"BMI4:MT21TRUE"},{"coefficient":0.024413,"_row":"EDU2:MT21TRUE"},{"coefficient":-0.02079696,"_row":"EDU15:MT21TRUE"},{"coefficient":-0.01533694,"_row":"EDU16:MT21TRUE"},{"coefficient":-0.0530172,"_row":"RACE3:EDU1"},{"coefficient":-0.00582531,"_row":"RACE4:EDU1"},{"coefficient":0.07161817,"_row":"RACE3:EDU2"},{"coefficient":0.02867814,"_row":"RACE6:EDU2"},{"coefficient":-0.02806197,"_row":"RACE4:EDU13"},{"coefficient":-0.04079575,"_row":"RACE4:EDU14"},{"coefficient":0.02279502,"_row":"RACE6:EDU14"},{"coefficient":0.00159243,"_row":"RACE2:EDU15"},{"coefficient":0.00096158,"_row":"RACE4:EDU15"},{"coefficient":0.55058769,"_row":"RACE3:EDU16"},{"coefficient":-0.00854549,"_row":"RACE4:EDU16"},{"coefficient":-0.00074284,"_row":"RACE6:EDU16"},{"coefficient":0.02904899,"_row":"RACE2:MT21TRUE"},{"coefficient":0.04601872,"_row":"RACE3:MT21TRUE"},{"coefficient":0.02360032,"_row":"RACE6:MT21TRUE"},{"coefficient":-0.00042593,"_row":"RACE2:EMPTRUE:SALARY"},{"coefficient":-0.00157946,"_row":"AGE:BMI3:LT5TRUE"},{"coefficient":-0.00001016,"_row":"AGE:BMI3:LT10TRUE"},{"coefficient":-0.00019232,"_row":"AGE:BMI5:MT21TRUE"},{"coefficient":0.00402159,"_row":"BMI3:SEXTRUE:LT5TRUE"},{"coefficient":0.03732513,"_row":"BMI3:SEXTRUE:MT21TRUE"},{"coefficient":0.00060415,"_row":"AGE:BMI2:SEXTRUE"},{"coefficient":0.07459039,"_row":"RACE2:EDU1:MT21TRUE"},{"coefficient":0.04794638,"_row":"RACE4:EDU1:MT21TRUE"},{"coefficient":0.23707557,"_row":"RACE6:EDU1:MT21TRUE"},{"coefficient":-0.03226748,"_row":"RACE2:EDU2:MT21TRUE"},{"coefficient":0.15484254,"_row":"RACE4:EDU2:MT21TRUE"},{"coefficient":0.07415995,"_row":"RACE2:EDU13:MT21TRUE"},{"coefficient":0.06569837,"_row":"RACE6:EDU13:MT21TRUE"},{"coefficient":0.00016144,"_row":"RACE2:EDU15:MT21TRUE"},{"coefficient":-0.0024531,"_row":"RACE4:EDU16:MT21TRUE"},{"coefficient":-0.00001769,"_row":"RACE4:HOUR:EMPTRUE:SALARY"},{"coefficient":0.00053664,"_row":"AGE:BMI2:SEXTRUE:MT21TRUE"}];

  ZEROREG = [{"coefficient":-0.33932679,"_row":"intercept"},{"coefficient":-0.75078841,"_row":"BORNUSATRUE"},{"coefficient":-0.02917726,"_row":"AGE"},{"coefficient":0.15540324,"_row":"SEXTRUE"},{"coefficient":0.26681327,"_row":"RACE2"},{"coefficient":0.33260554,"_row":"MARRY5"},{"coefficient":-0.27433564,"_row":"MARRY6"},{"coefficient":-0.9980144,"_row":"CANCERTRUE"},{"coefficient":-1.57455565,"_row":"DIABTRUE"},{"coefficient":0.44577962,"_row":"EDU13"},{"coefficient":-0.32002069,"_row":"EDU16"},{"coefficient":0.00315194,"_row":"HOUR"},{"coefficient":-1.55339618,"_row":"PREGTRUE"},{"coefficient":0.07058078,"_row":"EMPTRUE"},{"coefficient":-0.0011137,"_row":"SALARY"},{"coefficient":-0.46472327,"_row":"LT5TRUE"},{"coefficient":-0.13998139,"_row":"LT10TRUE"},{"coefficient":0.14602864,"_row":"MT21TRUE"},{"coefficient":-0.00119865,"_row":"EMPTRUE:SALARY"},{"coefficient":0.00011464,"_row":"HOUR:EMPTRUE"},{"coefficient":0.04015172,"_row":"RACE4:EMPTRUE"},{"coefficient":-0.00078582,"_row":"AGE:DIABTRUE"},{"coefficient":-0.00814794,"_row":"AGE:BMI5"},{"coefficient":-0.14933283,"_row":"SEXTRUE:LT10TRUE"},{"coefficient":0.49932932,"_row":"SEXTRUE:MT21TRUE"},{"coefficient":-0.00028082,"_row":"BMI3:LT5TRUE"},{"coefficient":0.64782725,"_row":"EDU1:MT21TRUE"},{"coefficient":0.5247662,"_row":"EDU2:MT21TRUE"},{"coefficient":-0.35198364,"_row":"EDU15:MT21TRUE"},{"coefficient":-0.16067457,"_row":"EDU16:MT21TRUE"},{"coefficient":-0.01997647,"_row":"RACE4:EDU1"},{"coefficient":0.02038745,"_row":"RACE2:EDU14"},{"coefficient":-0.1601556,"_row":"RACE6:EDU15"},{"coefficient":0.01153994,"_row":"RACE4:EDU16"},{"coefficient":-0.00134708,"_row":"AGE:BMI4:MT21TRUE"},{"coefficient":-0.01871926,"_row":"BMI3:SEXTRUE:LT10TRUE"},{"coefficient":-0.24995429,"_row":"RACE2:EDU1:MT21TRUE"},{"coefficient":-0.16876358,"_row":"RACE2:EDU2:MT21TRUE"},{"coefficient":-0.00269681,"_row":"RACE6:EDU15:MT21TRUE"},{"coefficient":0.00001678,"_row":"RACE4:EDU16:MT21TRUE"},{"coefficient":-0.00078289,"_row":"AGE:BMI4:SEXTRUE:MT21TRUE"}];

</script>


<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="https://d3js.org/d3.v4.js"></script>
<script src="ion.rangeSlider.min.js"></script>
<script src="medical_simulation.js"></script>


<link rel="stylesheet" href="foundation.min.css">
<link rel="stylesheet" href="ion.rangeSlider.css">
<link rel="stylesheet" href="ion.rangeSlider.skinShiny.css">



<style>
  input[type=range] {
    width: 100%;
  }
  #form {
    margin-bottom: 1rem;
  }
  .irs-min, .irs-max {
    display: none;
  }
  rect.bar {
    fill: #11a3d5;
  }
</style>
